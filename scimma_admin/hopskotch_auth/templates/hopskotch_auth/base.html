{% load static bootstrap4 tz %}

<html>
    <head>
        {% bootstrap_css %}
        <link rel="stylesheet" href="{% static 'hopskotch_auth/css/main.css' %}">
        {% bootstrap_javascript jquery='True' %}

        <title>SCIMMA Admin | {% block title %}{% endblock %}</title>
    </head>
    <style>
        .messages {
            width: 80%;
            border: 1px solid darkred;
            background-color: lightgrey;
        }
        li.error, li.warning {
            background-color: orange;
        }
        td.info  {
           text-align: center;
        }
        th, td {
            border: 1px solid black;
            padding-left: 1em;
            padding-right: 1em;
        }
        td form {
           margin: 0;
           display: inline-block;
        }
        form#logout {
           display: inline-block;
        }
        {% block page-style %}
        {% endblock %}
    </style>
    <body>
        <nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
            <h1 class="text-light">
                {% block page-header %}
                {% endblock %}
            </h1>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav ml-auto">
                {% if user.is_authenticated %}
                    <li class="nav-item">
                        <span class="text-light">Current user: {{ user.email }} ({{ user.username }})</span>
                        <form class="form-inline my-2 my-lg-0" id="logout" action="{% url 'oidc_logout' %}" method="post">
                            {% csrf_token %}
                            <input class="btn btn-primary" type="submit" value="Log out">
                        </form>
                    </li>
                {% else %} {# Not authenticated #}
                    <li class="nav-item">
                        <a href="{% url 'oidc_authentication_init' %}">Log in</a>
                    </li>
                {% endif %}
                </ul>
              </div>
        </nav>

        <main class="container">
            {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>
                    {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}Important: {% endif %}
                    {{ message }}
                </li>
                {% endfor %}
            </ul>
            {% endif %}

            {% block page-body %}
            {% endblock %}
        </main>
    </body>
</html>
